{"version":3,"sources":["services/persons.js","components/displayNames.js","components/filter.js","components/personForm.js","app.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","IDtoUpdate","personToUpdate","setErrorMessage","put","concat","catch","error","name","setTimeout","IDtoDelete","updatePersonsFromDb","window","confirm","delete","DisplayNames","_ref","persons","newFilterString","map","entry","i","toLowerCase","includes","react_default","a","createElement","key","number","onClick","personsService","id","Filter","handleFilterChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewFilterString","_useState9","_useState10","errorMessage","useEffect","message","className","filter","event","target","personForm","preventDefault","find","x","idToUpdate","console","log","toConsumableArray","displayNames","ReactDOM","render","app","document","getElementById"],"mappings":"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","file":"static/js/main.b8f73e3b.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst updatePersons = newPerson => {\n  const request = axios.post(baseUrl, newPerson)\n  return request.then(response => response.data)\n}\n\nconst updateExistingPerson = ( IDtoUpdate, personToUpdate, setErrorMessage ) => {\n  const request = axios.put(`${baseUrl}/${IDtoUpdate}`, personToUpdate)\n                  .catch(error => {\n                    setErrorMessage(\n                      `the information of '${personToUpdate.name}' was already deleted from the server`\n                    )\n                    setTimeout(() => {\n                      setErrorMessage(null)\n                    }, 3000)\n                    return \"Error handled\"\n                    })\n\n                  \n  return request.then(response => response.data)\n}\n\nconst deletePerson = ( IDtoDelete , name, updatePersonsFromDb) => {\n  if (window.confirm(`Delete ${name}?`)) {\n  const request = axios.delete(`${baseUrl}/${IDtoDelete}`)\n  return request.then(response => response.data).then(updatePersonsFromDb)\n}}\n\nexport default { getAll, updatePersons , updateExistingPerson, deletePerson }","import React from 'react'\nimport personsService from '../services/persons'\n\n  const DisplayNames = ({ persons, updatePersonsFromDb, newFilterString }) => persons.map((entry, i) => {\n      if (entry.name.toLowerCase().includes(newFilterString.toLowerCase())) {\n          return (\n          <p key={i}>{entry.name} {entry.number} <button onClick={() => personsService.deletePerson(entry.id, entry.name, updatePersonsFromDb)}>Delete</button></p>\n      )} else {\n          return (\"\")\n          }\n        }\n   )\n\nexport default DisplayNames","import React from 'react'\n\n const Filter = ({ newFilterString , handleFilterChange }) => (\n       <div>\n          filter shown with:  <input\n          value={newFilterString}\n          onChange={handleFilterChange}\n          />\n       </div>\n  )\n\n  export default Filter","import React from 'react'\n\nconst PersonForm = ({ addPerson , newName , handleNameChange , newNumber , handleNumberChange }) => (\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input\n          value={newName}\n          onChange={handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input\n          value={newNumber}\n          onChange={handleNumberChange}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n)\nexport default PersonForm","import React, { useState, useEffect } from 'react'\nimport DisplayNames from './components/displayNames'\nimport Filter from './components/filter'\nimport PersonForm from './components/personForm'\nimport personsService from './services/persons'\nimport axios from 'axios'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilterString, setNewFilterString ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  useEffect(() => {\n      axios\n      .get('http://localhost:3001/api/persons')\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n      event.preventDefault()\n      if (typeof (persons.find(x => x.name === newName)) != \"undefined\") {\n\n      if (window.confirm(`${newName} already exists in the phonebook. Replace old number with new number?`)) {\n        const idToUpdate = persons.find(x => x.name === newName).id\n        personsService\n        .updateExistingPerson(idToUpdate, { name: newName, number: newNumber }, setErrorMessage)\n        .then(updatePersonsFromDb)\n        setErrorMessage(\n        `${newName} was updated in the phonebook`\n      )\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 3000)\n\n      } else {\n         console.log(\"Cancelled\")\n      }\n\n      } else {\n          setPersons([...persons, { name: newName, number: newNumber }])\n          personsService\n          .updatePersons({ name: newName, number: newNumber })\n          .then(updatePersonsFromDb)\n          setErrorMessage(\n          `${newName} was added to the phonebook`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n      }\n  }\n\n  const handleFilterChange = (event) => {\n      setNewFilterString(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n      setNewNumber(event.target.value)\n  }\n\n  const updatePersonsFromDb = () => {\n    personsService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })}\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n    return null\n  } else if (message.includes(\"already deleted\")) {\n    \n    return (\n      <div className=\"error-red\">\n        {message}\n      </div>\n    )\n  }\n  \n  return (\n    <div className=\"error-green\">\n      {message}\n    </div>\n  )\n}\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={errorMessage} />\n\n      <Filter newFilterString={newFilterString}  handleFilterChange={handleFilterChange} />\n\n      <h3>Add a new...</h3>\n\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber}\n      handleNumberChange={handleNumberChange} />\n\n      <h2>Numbers</h2>\n\n      <DisplayNames persons={persons} updatePersonsFromDb={updatePersonsFromDb} newFilterString={newFilterString}/>\n\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app.js'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}